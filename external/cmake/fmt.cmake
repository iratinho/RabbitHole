option(FMT_SOURCE "Build with fmt sources" OFF)
include(FetchContent)

if(FMT_SOURCE)
    message("Building with FMT")
    add_subdirectory(${LIBRARIES_DIRECTORY}/fmt ${CMAKE_BINARY_DIR}/fmt)
    target_link_libraries(${TARGET_NAME} PUBLIC fmt::fmt)
else()
    message("Using FMT")
    FetchContent_Declare(fmt GIT_REPOSITORY https://github.com/fmtlib/fmt.git GIT_TAG master)
    FetchContent_MakeAvailable(fmt)
    target_link_libraries(${TARGET_NAME} PRIVATE fmt::fmt)
    target_include_directories(${TARGET_NAME} PRIVATE ${CMAKE_BINARY_DIR}/generated_install)
endif()
